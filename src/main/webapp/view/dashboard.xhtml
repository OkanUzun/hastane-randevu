<ui:composition template="/view/master/afterLoginTemplate.xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
  <ui:define name="title">Dashboard</ui:define>

  <ui:define name="content">
    <div class="page-wrapper">
      <div class="container-fluid">
        <div class="page-title">
          <h4>Hoşgeldin</h4>
          <button class="sidebar-toggler" type="button"><i class="fa fa-bars"></i></button>
        </div>
        <div class="card p-4">
          <h:panelGroup rendered="#{session.getAttribute('userType') == 'patient'}">
            <div class="row">
              <div class="col-lg-6 col-xl-3">
                <div class="small-card text-danger">
                  <div class="left">
                    <i class="fa fa-calendar-check-o"></i>
                    <h4>En Yakın Randevunuz</h4>
                  </div>
                  <div class="right">
                    <h:panelGroup rendered="#{not empty appointment.appointmentHistory}">
                    <span class="count">${appointment.appointmentCounter}
                      <small> gün sonra</small></span>
                    </h:panelGroup>
                    <h:outputText rendered="#{empty appointment.appointmentHistory}" value="Randevu Yok"/>
                    <h:outputText styleClass="date" value="#{appointment.appointmentHistory.get(0).appointmentDate}" rendered="#{not empty appointment.appointmentHistory}">
                      <f:convertDateTime timeZone="GMT+3" pattern="dd-MM-yyyy HH:mm"/>
                    </h:outputText>
                  </div>
                </div>
              </div>
              <div class="col-lg-6 col-xl-3 d-flex align-content-stretch">
                <div class="small-card text-info">
                  <div class="left">
                    <i class="fa fa-thermometer-half"></i>
                    <h4>Alerjileriniz</h4>
                  </div>
                  <div class="right">
                    <span class="count">${alergy.alergyCount}</span>
                  </div>
                </div>
              </div>
              <div class="col-lg-6 col-xl-3 d-flex align-content-stretch">
                <div class="small-card text-muted">
                  <div class="left">
                    <i class="fa fa-thermometer-three-quarters"></i>
                    <h4>Hastalıklarınız</h4>
                  </div>
                  <div class="right">
                    <span class="count">${disease.diseaseCount}</span>
                  </div>
                </div>
              </div>
              <div class="col-lg-6 col-xl-3 d-flex align-content-stretch">
                <div class="small-card text-primary">
                  <div class="left">
                    <i class="fa fa-thermometer-full"></i>
                    <h4>Tahlilleriniz</h4>
                  </div>
                  <div class="right">
                    <span class="count">${assay.assayCount}</span>
                  </div>
                </div>
              </div>
            </div>
          </h:panelGroup>
          <h:panelGroup rendered="#{session.getAttribute('userType') == 'doctor'}">
            <div class="row">
              <div class="col-lg-6 col-xl-3">
                <div class="small-card text-danger">
                  <div class="left">
                    <i class="fa fa-calendar-check-o"></i>
                    <h4>Tüm Randevularınız</h4>
                  </div>
                  <div class="right">
                    <span class="count">${doctor.appointmentCount}</span>
                  </div>
                </div>
              </div>
              <div class="col-lg-6 col-xl-3 d-flex align-content-stretch">
                <div class="small-card text-muted">
                  <div class="left">
                    <i class="fa fa-chain-broken"></i>
                    <h4>Bugün Kalan Randevularım</h4>
                  </div>
                  <div class="right">
                    <span class="count">${doctor.remainingAppointment}</span>
                  </div>
                </div>
              </div>
            </div>
          </h:panelGroup>
        </div>
      </div>
    </div>
  </ui:define>
</ui:composition>